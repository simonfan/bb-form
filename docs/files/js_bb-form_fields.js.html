<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>js/bb-form/fields.js - bb-form</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="bb-form"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/BbForm.html">BbForm</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: js/bb-form/fields.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
define(function defRetrieveInputTemplate(require, exports, module) {

	var $             = require(&#x27;jquery&#x27;),
		_             = require(&#x27;lodash&#x27;),
		baseFieldView = require(&#x27;bb-form/fields/base&#x27;);

	var aux = require(&#x27;bb-form/aux&#x27;);

	/**
	 * Hash on which fields are defined.
	 * @type {Object}
	 */
	exports.fields = {
		text: {
			template: _.template(require(&#x27;text!bb-form/fields/html/text.html&#x27;)),
			view    : require(&#x27;bb-form/fields/text&#x27;),
		},

		textarea: {
			template: _.template(require(&#x27;text!bb-form/fields/html/textarea.html&#x27;)),
			view    : require(&#x27;bb-form/fields/text&#x27;)
		},

		select: {
			template: _.template(require(&#x27;text!bb-form/fields/html/select.html&#x27;)),
		},

		file: {
			template: _.template(require(&#x27;text!bb-form/fields/html/file.html&#x27;)),
			view    : require(&#x27;bb-form/fields/file&#x27;)
		}

	};

	/**
	 * Retrieves the input model&#x27;s html
	 * based on the type.
	 *
	 * @param  {[type]} fieldModel [description]
	 * @return {[type]}            [description]
	 */
	exports.modelHtml = function fieldModelHtml(fieldModel) {

		var html = fieldModel.get(&#x27;html&#x27;);

		// if no html string was defined,
		// attempt to get template based on type.
		if (!html) {

			var type        = fieldModel.get(&#x27;type&#x27;),
				inputConfig = this.fields[type];

			if (!inputConfig) {
				throw new Error(&#x27;No input configuration found for &quot;&#x27; + type + &#x27;&quot;.&#x27;);
			}

			var template = inputConfig.template;


			// parse out the attributes hash
			var fieldModelAttributes = fieldModel.toJSON();

			// convert the &#x27;attribute&#x27; from camel case to dashed
			// in order to let the data attributes be valid
			// (see ATTENTION below)
			fieldModelAttributes.attribute = aux.camelCaseToDashed(fieldModelAttributes.attribute);

			// assume the template is already a function and pass it
			// the fieldModel&#x27;s attributes
			html = template(fieldModelAttributes);

			/** ATTENTION
			A custom data attribute is an attribute in no namespace whose name
			starts with the string &quot;data-&quot;, has at least one character after the hyphen,
			is XML-compatible, and contains no characters in the range U+0041 to U+005A
			(LATIN CAPITAL LETTER A to LATIN CAPITAL LETTER Z).

			Note that it also restricts the usage to lower case, however another note applies:

			All attributes on HTML elements in HTML documents get ASCII-lowercased automatically,
			so the restriction on ASCII uppercase letters doesn&#x27;t affect such documents
			**/
		}

		// return html.
		return html;
	};


	/**
	 * Override modelView for bbcv.
	 *
	 * @param  {[type]} model [description]
	 * @return {[type]}       [description]
	 */
	exports.modelView = function inputView(options) {

		var fieldModel = options.model,
			el         = options.el;


		// incorporate the $el
		this.bbmvInstance.incorporate(el);

		// set mainModel onto the options
		options.formView  = this;
		options.formModel = this.model;

		// attrieve to get the specific view for the model&#x27;s type
		// defaults to backbone.view.
		var inputView = fieldModel.get(&#x27;view&#x27;) ||
			this.fields[fieldModel.get(&#x27;type&#x27;)].view ||
			baseFieldView;

		// return the instance of the inputView.
		return inputView(options);
	};

	/**
	 * Validates an attribute.
	 *
	 * @param  {[type]} attribute  [description]
	 * @param  {[type]} value      [description]
	 * @param  {[type]} fieldModel [description]
	 * @return {[type]}            [description]
	 */
	exports.validate = function validate(attribute, value, fieldModel) {

		var validators = this.validators;

		if (validators[attribute]) {
			return validators[attribute].call(this, attribute, value, fieldModel);
		} else if (validators[fieldModel.get(&#x27;type&#x27;)]) {
			return validators[fieldModel.get(&#x27;type&#x27;)].call(this, attribute, value, fieldModel);
		} else {

			// return false if no validators are found.
			return false;
		}

	};

	/**
	 * Hash on which validators are defined.
	 * Keyed by either
	 * attribute name
	 * or input type.
	 *
	 * @type {Object}
	 */
	exports.validators = {
		text: function validateTextTypeField(attribute, value, fieldModel) {

			if (value === &#x27;&#x27;) {
				return {
					error: &#x27;Value for field &#x27; + attribute + &#x27; is empty.&#x27;
				}
			}
		},
	};

	exports.validators.select = exports.validators.text;



});

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
